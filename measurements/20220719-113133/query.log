make[1]: Entering directory '/home/isucon/webapp'
sudo pt-query-digest /var/log/mysql/mariadb-slow.log

# 7.6s user time, 20ms system time, 34.66M rss, 41.96M vsz
# Current date: Tue Jul 19 11:31:42 2022
# Hostname: ip-172-31-36-52
# Files: /var/log/mysql/mariadb-slow.log
# Overall: 86.63k total, 75 unique, 256.30 QPS, 0.33x concurrency ________
# Time range: 2022-07-19 11:18:29 to 11:24:07
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           113s     1us   245ms     1ms     3ms    11ms    54us
# Lock time             2s       0    29ms    26us    36us   179us    23us
# Rows sent         17.27k       0     127    0.20    0.99    2.06       0
# Rows examine      43.83M       0  62.45k  530.55       0   4.55k       0
# Rows affecte      62.60k       0     618    0.74    0.99    2.06    0.99
# Bytes sent        49.82M       0 187.12k  603.09   56.92   8.46k   12.54
# Query size        31.07M       6 790.36k  376.12  271.23   4.85k  246.02
# Boolean:
# QC hit         8% yes,  91% no

# Profile
# Rank Query ID                      Response time Calls R/Call V/M   Item
# ==== ============================= ============= ===== ====== ===== ====
#    1 0x8155B89FFD74A9D523D19AC4... 80.7189 71.3%  1332 0.0606  0.06 SELECT isu_condition
#    2 0xFFFCA4D67EA0A788813031B8... 24.8740 22.0%  6647 0.0037  0.00 COMMIT
#    3 0xB8B32624C3268C0925657C30...  5.9723  5.3% 63335 0.0001  0.00 INSERT isu_condition
# MISC 0xMISC                         1.6032  1.4% 15314 0.0001   0.0 <72 ITEMS>

# Query 1: 19.30 QPS, 1.17x concurrency, ID 0x8155B89FFD74A9D523D19AC409FD97AF at byte 51067605
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.06
# Time range: 2022-07-19 11:18:34 to 11:19:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    1332
# Exec time     71     81s   226us   245ms    61ms   180ms    61ms    30ms
# Lock time      5   136ms    15us    29ms   102us    60us     1ms    33us
# Rows sent      7   1.30k       0       1    1.00    0.99    0.03    0.99
# Rows examine  99  43.69M     619  62.04k  33.59k  56.74k  16.79k  33.17k
# Rows affecte   0       0       0       0       0       0       0       0
# Bytes sent     1 1000.39k     589     812  769.07  755.64   14.55  755.64
# Query size     0 162.60k     125     125     125     125       0     125
# String:
# Databases    isucondition
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #
#   1ms  ################
#  10ms  ################################################################
# 100ms  ###############################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucondition` LIKE 'isu_condition'\G
#    SHOW CREATE TABLE `isucondition`.`isu_condition`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM `isu_condition` WHERE `jia_isu_uuid` = 'c6b022a2-9524-4458-8b73-70892c023453' ORDER BY `timestamp` DESC LIMIT 1\G

# Query 2: 96.33 QPS, 0.36x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 22135024
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-19 11:18:34 to 11:19:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          7    6647
# Exec time     21     25s     6us    27ms     4ms     8ms     2ms     3ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Rows affecte   0       0       0       0       0       0       0       0
# Bytes sent     0  71.40k      11      11      11      11       0      11
# Query size     0  38.95k       6       6       6       6       0       6
# String:
# Databases    isucondition
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us  #
#  10us  #
# 100us  #
#   1ms  ################################################################
#  10ms  #
# 100ms
#    1s
#  10s+
COMMIT\G

# Query 3: 945.30 QPS, 0.09x concurrency, ID 0xB8B32624C3268C0925657C305C0ED778 at byte 23415075
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-19 11:18:35 to 11:19:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         73   63335
# Exec time      5      6s    18us    38ms    94us    98us   486us    54us
# Lock time     85      2s     9us    10ms    31us    36us   116us    25us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Rows affecte  98  61.85k       1       1       1       1       0       1
# Bytes sent     1 804.06k      13      13      13      13       0      13
# Query size    51  15.98M     232     309  264.54  271.23   12.79  258.32
# String:
# Databases    isucondition
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ##
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucondition` LIKE 'isu_condition'\G
#    SHOW CREATE TABLE `isucondition`.`isu_condition`\G
INSERT INTO `isu_condition`	(`jia_isu_uuid`, `timestamp`, `is_sitting`, `condition`, `message`)	VALUES ('59cc656d-784b-4752-955e-f50850b22ce4', '2021-08-18 13:28:57.000', true, 'is_dirty=true,is_overweight=true,is_broken=true', 'この状況はさすがに無理です...')\G
make[1]: Leaving directory '/home/isucon/webapp'
